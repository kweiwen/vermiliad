<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>VSTGUI: Create your own view for the WYSIWYG editor in VSTGUI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VSTGUI
   &#160;<span id="projectnumber">4.9</span>
   </div>
   <div id="projectbrief">Graphical User Interface Framework not only for VST plugins</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_page_create_your_own_ui_view.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Create your own view for the WYSIWYG editor in <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>When you want to edit your own VST3 plugin. You can find the need to create your own View.</p>
<p>You can edit your plugin by doing "Right click &gt; Open UIDescription Editor"</p>
<div class="image">
<img src="editVST3.png" alt="editVST3.png"/>
<div class="caption">
Edit VST3 plugin</div></div>
<p> You can find more information about this interface in the documentation : "VSTGUI 4 &gt; VSTGUI &gt; New Inline UI Editor for VST3 (WYSIWYG) &gt; The Editor".</p>
<p>During this tutorial we will make a new view that will appear in the "Views Tab" at the bottom right of the editor and it allow us to drag and drop it inside our VST3 plugin.</p>
<h2>Create the new view class</h2>
<p>To create a new graphical view you need to create a class that inherites from <em>CView</em> or <em>CControl</em>. We recommend that you start with the <em>CControl</em> class when you plan to have an interactive view, otherwise if it only should display data use <em>CView</em>.</p>
<p>Your header file should look like this :</p>
<p>```c++ #pragma once</p>
<p>#include "vstgui/vstgui.h"</p>
<p>namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> {</p>
<p>class MyControl : public CControl { public: MyControl (const CRect&amp; size );</p>
<p>void draw (CDrawContext *pContext) override;</p>
<p>CLASS_METHODS (MyControl, CControl) };</p>
<p>} // namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> ```</p>
<p>And your cpp file :</p>
<p>```c++ #include "MyControl.h"</p>
<p>namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> {</p>
<p>MyControl::MyControl (const CRect&amp; size) : CControl (size) {}</p>
<p>void MyControl::draw (CDrawContext* pContext) { // &mdash; setup the background rectangle pContext-&gt;setLineWidth (1); pContext-&gt;setFillColor (CColor (255, 255, 255, 255)); // white background pContext-&gt;setFrameColor (CColor (0, 0, 0, 255)); // black borders</p>
<p>// &mdash; draw the rect filled (with white) and stroked (line around rectangle) pContext-&gt;drawRect (getViewSize (), kDrawFilledAndStroked);</p>
<p>setDirty (false); }</p>
<p>} // namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> ```</p>
<p>We have two functions, the constructor which only calls the parent constructor and the <em>draw</em> function which will define the design of the view. In this example we draw a white rectangle with black borders.</p>
<h2>Register your view</h2>
<p>So now you have a basic graphical view. But it will not appear in the list when you edit your plugin.</p>
<p>You need to create a new class, a "factory", that will register your view and create it. This class only needs a cpp file (if you strip dead code in your linker settings, then you need to make sure that this class is not stripped).</p>
<p>Let us begin by creating an empty class that inherites from *'ViewCreatorAdapter'* :</p>
<p>```c++ #pragma once</p>
<p>#include "vstgui/vstgui.h" #include "vstgui/vstgui_uidescription.h" #include "vstgui/uidescription/detail/uiviewcreatorattributes.h"</p>
<p>// Replace this include by the header file of your new view. #include "MyControl.h"</p>
<p>namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> {</p>
<p>class MyControlFactory : public ViewCreatorAdapter { public:</p>
<p>};</p>
<p>} // namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> ```</p>
<p>In the constructor we need to register our view to the UIViewFactory. If we don't do that it will not appear in the list that will allow us to add the view to our VST3 plugin.</p>
<p>```c++ MyControlFactory () { UIViewFactory::registerViewCreator (<em>this); } ```</em></p>
<p><em>The main factory needs 3 others functions :</em></p>
<p><em></p><ul>
<li>The name of the view (as shown in the WYSIWYS editor)</li>
</ul>
<p></em></p>
<p><em>```c++ IdStringPtr getViewName () const { return "Name of my UI component"; } ```</em></p>
<p><em></p><ul>
<li>The parent class of the view (In this tutorial we're using <em>CControl</em>)</li>
</ul>
<p></em></p>
<p><em>```c++ IdStringPtr getBaseViewName () const { return UIViewCreator::kCControl; } ```</em></p>
<p><em></p><ul>
<li>and a creator method which returns a new view with a default size</li>
</ul>
<p></em></p>
<p><em>```c++ CView</em> create (const UIAttributes&amp; attributes, const IUIDescription* description) const { return new MyControl (CRect (0, 0, 100, 100)); } ```</p>
<p>You also need to create a static variable having the same type as our factory. This variable will call the constructor of your factory. Thus, your view will be registered automatically.</p>
<p>```c++ MyControlFactory __gMyControlFactory; ```</p>
<p>So at the end you should have something like this :</p>
<p>```c++ #pragma once #include "vstgui/vstgui.h" #include "vstgui/vstgui_uidescription.h" #include "vstgui/uidescription/detail/uiviewcreatorattributes.h" #include "MyControl.h"</p>
<p>namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> {</p>
<p>class MyControlFactory : public ViewCreatorAdapter { public: // register this class with the view factory MyControlFactory () { UIViewFactory::registerViewCreator (*this); }</p>
<p>// return an unique name here IdStringPtr getViewName () const override { return "Name of my UI component"; }</p>
<p>// return the name here from where your custom view inherites. // Your view automatically supports the attributes from it. IdStringPtr getBaseViewName () const override { return UIViewCreator::kCControl; }</p>
<p>// create your view here. // Note you don't need to apply attributes here as // the apply method will be called with this new view CView* create (const UIAttributes&amp; attributes, const IUIDescription* description) const override { CRect size (CPoint (45, 45), CPoint (400, 150) ); return new MyControl (size); } }; // create a static instance so that it registers itself with the view factory MyControlFactory __gMyControlFactory;</p>
<p>} // namespace <a class="el" href="namespace_v_s_t_g_u_i.html">VSTGUI</a> ```</p>
<h2>Result</h2>
<p>Now if you come back to the VST 3 plugin Editor you can find your new view in the list.</p>
<div class="image">
<img src="newuicompname.png" alt="newuicompname.png"/>
<div class="caption">
Edit VST3 plugin</div></div>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 2 2019 13:58:44 for VSTGUI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
